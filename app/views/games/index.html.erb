<%= render 'shared/navbar' %>

<div class="container">
  <p>Choose your game:</p>
  <div class="container-row">
    <div class="cards">
      <% current_user.games.where(ongoing: true).each do |game| %>
        <div class="card-product">
          <div class="card-product-infos">
            <% grids = Grid.where(game_id: game.id) %>
            <% opponent_grid = grids.first.user_id == current_user.id ? grids.last : grids.first %>
            <% opponent_name = User.find(opponent_grid.user_id).username %>
            <h3>Game vs<%= "#{opponent_name}" %></h3>
            <h3><%= link_to "Join", game_path(game), class: "btn btn-flat" %></h3>
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
